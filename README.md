# API для работы с данными о занятиях

Веб-сервер на базе ExpressJS для работы с данными о занятиях, учителях и студентах, хранящимися в PostgreSQL.

## Технологии

- Node.js (версия 16+)
- TypeScript
- Express.js
- Sequelize-TypeScript
- PostgreSQL

## Установка и запуск

### Предварительные требования

- Node.js версии 16 или выше
- PostgreSQL

### Шаги по установке

1. Клонировать репозиторий

```bash
git clone <url-репозитория>
cd <название-папки>
```

2. Установить зависимости

```bash
yarn install
```

3. Настроить Envarioment

```bash
cp .env.example .env
```

5. Собрать проект

```bash
yarn build
```

6. Запустить сервер

```bash
yarn start
```

Для разработки можно использовать режим с автоматической перезагрузкой:

```bash
yarn dev
```

##  Docker 

```bash
docker-compose up -d
```
Это запустит:

- PostgreSQL базу данных
- PgAdmin для управления базой данных
- Ваше приложение
Приложение будет доступно по адресу http://localhost:3000


## API

### GET /api/lessons

Получение списка занятий с возможностью фильтрации и пагинации.

#### Параметры запроса

Все параметры необязательные:

- `date` - дата или диапазон дат в формате YYYY-MM-DD (например, `2019-01-01` или `2019-01-01,2019-09-01`)
- `status` - статус занятия: 0 (не проведено) или 1 (проведено)
- `teacherIds` - ID учителей через запятую (например, `1,2,3`)
- `studentsCount` - количество записанных студентов: одно число или диапазон через запятую (например, `5` или `3,8`)
- `page` - номер страницы (по умолчанию 1)
- `lessonsPerPage` - количество занятий на странице (по умолчанию 5)

#### Пример запроса

```
GET /api/lessons?date=2019-01-01,2019-09-01&status=1&teacherIds=1,2&studentsCount=5,10&page=1&lessonsPerPage=10
```

#### Пример ответа

```json
[
  {
    "id": 9,
    "date": "2019-09-01",
    "title": "Orange",
    "status": 1,
    "visitCount": 3,
    "students": [
      {
        "id": 1,
        "name": "Ivan",
        "visit": true
      }
    ],
    "teachers": [
      {
        "id": 1,
        "name": "Tanya"
      }
    ]
  }
]
```